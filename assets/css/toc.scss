---
# // Arbitrary yaml header for Jekyll to pick up the file
---

html {
    scroll-behavior: smooth;
}

.content-with-toc {
    position: relative;
    width: min(90vw, 970px);
    margin-right: auto;
    margin-left: auto;
    left: 1em;

    .toc {
        display: none;
        line-height: 1.2;

        &::before {
            content: 'ON THIS PAGE';
            position: relative;
            font-family: Arial, sans-serif;
            font-weight: lighter;
        }

        @media screen and (min-width: 992px){
            display: block;
            padding-left: 2em;
            padding-top: 1em;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;

            .toc-entry {
                animation-duration: 1s;
                padding: 0.2em 0.5em;
                margin: 0;
                border-left: 2px solid #cdcdcd;
                
                a {
                    text-decoration: none;
                }

                &:hover, &.current {
                    border-left: 2px solid  var(--link-colour, var(--accent-colour, #008eaa));
                }

                &:hover {
                    filter: var(--link-hover-filter, brightness(120%));
                    a {
                        filter: none !important;
                    }
                }
            }

            .toc-level-h2 {
                margin-top: 0.5em;
            }

            .toc-level-h3 {
                padding-left: 1em;
            }
        }
    }

    @media screen and (min-width: 992px){
        display: flex;
        flex-flow: row-reverse nowrap;
                
        // calculate left margin to place ToC in the margin as much as possible.
        // magic numbers: 
        //   min(90vw, 840px) - max-width of container element (at 992-1200px screen width)
        margin-left: calc((100vw - min(90vw, 840px)) / 2);

        // sticky side-toc
        .toc {
            flex: content 1 1;
            position: sticky;
            top: 2em;
            align-self: start;    
            
            width: auto;
            min-width: 200px;
            max-width: 250px;
        }
        
        .content {
            flex: min-content 1 2;
            max-width: 820px;
        }
    }

    @media screen and (min-width: 1200px) {
        // magic numbers: 
        //   min(90vw, 920px) - max-width of container element (at >1200px screen width)
        margin-left: calc((100vw - min(90vw, 920px)) / 2);
    }
}