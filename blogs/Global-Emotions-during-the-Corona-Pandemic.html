<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Global Emotions during the Corona Pandemic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/assets/images/favicon.png">
  <link href="/assets/css/style.css?v=1760230380" rel="stylesheet">

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.15.2/js/selectize.min.js" integrity="sha512-IOebNkvA/HZjMM7MxL0NYeLYEalloZ8ckak+NDtOViP7oiYzG5vn6WVXyrJDiJPhl4yRdmNAG49iuLmhkUdVsQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.15.2/css/selectize.min.css" integrity="sha512-wCrId7bUEl7j1H60Jcn4imkkiIYRcoyq5Gcu3bpKAZYBJXHVMmkL4rhtyhelxSFuPMIoQjiVsanrHxcs2euu/w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.15.2/css/selectize.bootstrap4.min.css" integrity="sha512-ht3CSPjgWsxdbLti7wtKNEk5hLoGtP2J8C40muB5/PCWwNw9M/NMJpyvHdeko7ADC60SEOiCenU5pg+kJiG9lg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
   -->
  <!-- icons -->
  <script src="https://code.iconify.design/2/2.0.3/iconify.min.js"></script>
  
  <!-- mathjax -->
  <script>MathJax={tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]}};</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-svg.min.js" integrity="sha512-lod3aTRkO5OUBZDRwWaaIGYAT6+2uSyrlwnj0sg1h9a1w5wJ7NnzkaiUWy4Jv5wdf1ixGX35HK6u7fP1pjYOQw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- floating toc -->
  <!-- <link href="/assets/css/toc.css?v=1760230380" rel="stylesheet"> -->
  <script src="/assets/js/toc.js" async defer></script>

  <!-- a11y -->
  <!-- dynamically fix links to common office document to include file type and size -->
  <script src="/assets/js/a11y-fix-office-links.js" async defer></script>

  <!-- calendar parsing/generating -->
  <script src="https://cdn.jsdelivr.net/npm/ical.js@1.5.0/build/ical.min.js" integrity="sha256-uotVKltUv5neKsIlZxrxUccba0PaptusFj6p+w8Sons=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/add-to-calendar-button@2" async defer></script>

  <!-- logo slider -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1/slick/slick.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1/slick/slick-theme.min.css">
  <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1/slick/slick.min.js"></script> -->
  
  

</head>

  <body class='page page-single'>

  <div class="main-menu-mobile" id="main-menu-mobile">
    <ul>
        <li><a href="/" class="">Home</a></li>
        <li><a href="/about" class="">About</a></li>
        <li><a href="/research" class="">Research support</a></li>
        <li><a href="/expertise" class="">Expertise sharing</a></li>
        <li><a href="/community" class="">Community building</a></li>
        <li><a href="/team" class="">Team</a></li>
    </ul>
</div>

  <div class="header ">
    <nav class="container">
        <div class="logo">
            <a href="/" aria-label="BDSi front page">
                <img src="/assets/images/logo-light.svg" alt="">
            </a>
        </div>
        <div class="logo-mobile">
            <a href="/" aria-label="BDSi front page">
                <img src="/assets/images/logo-light.svg" alt="">
            </a>
        </div>
        <div class="main-menu" id="main-menu">
    <ul>
        <li><a href="/about" class="">About</a></li>
        <li><a href="/research" class="">
            Research
            <div class="rollover">Support</div>
        </a></li>
        <li><a href="/expertise" class="">
            Expertise
            <div class="rollover">Sharing</div>
        </a></li>
        <li><a href="/community" class="">
            Community
            <div class="rollover">Building</div>
        </a></li>
        <!-- <li><a href="/events" class="">Events</a></li> -->
        <li><a href="/team" class="">Team</a></li>
        <!-- <li><a href="/blogs" class="current">Blog</a></li> -->
    </ul>
</div>

        <div id="toggle-main-menu-mobile" class="hamburger hamburger--slider">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</div>
    </nav>
</div>

  <div id="content">
    <div class="container pb-6">
    <header>
        <h1 class="hero text-white">Global Emotions during the Corona Pandemic</h1>
        
    </header>
</div>
<div class="strip strip-diagonal">
    <div class="content-with-toc">
        <div class="toc"></div>
        <div class="content">
            

<div class="author-list">
        

<a class="author-list-item" href="/team/#a-k-machens">
        <h4><img src="/assets/images/team/Anna-thumbnail.png" alt="">Anna Machens</h4>
    </a>
    
</div>

            
            <div class="date h5">October 22, 2022
            </div>
            
            
<figure class="card mb-2 shadow mx-auto" style="width: min(90vw, 800px); max-width: 100%; ">
  
  <iframe src="/assets/images/blogs/global-emotions-corona/twitter_map_emo.html" width="100%" height="500px" frameborder="0"></iframe>
  
  <div class="card-body px-2 py-1">
    <div class="card-text">
      <figcaption class="h6 m-0 p0 m0 label-figure">Tweets are coloured according to their emotion. Yellow: Joy, Red: Anger, Blue: Sadness, Green: Fear. The Tweet appears on the location it was sent from (given in latitude and longitude)</figcaption>
    </div>
  </div>
</figure>

<h2 id="introduction">Introduction</h2>
<p>This small project was created for a workshop in 2020. 
It showcases how BDSi can help with data science projects.
Let’s dive into 3 steps of any data science project: Data acquisition, Modeling, Visualization.</p>

<h2 id="data-aquisition">Data aquisition</h2>

<p>BDSi can obtain data from various sources for BMS researchers. These included in the past, but are not limited to text data, like newspaper articles, social media posts (Twitter, Youtube, Reddit,..), forum posts (for example from an idea submission board), etc.. Much of the data scraping we do ourselves, but if possible we also use open data. Here we made use of publicly available data that consist of over 500mio tweets from all over the world related to COVID19. These tweets all have location information, from country or state over city all the way down to precise geo-location tagging. The tweets were selected using keywords in different languages related to the corona epidemic. They originated in over 200 countries and were written in over 60 languages (1).
We only downloaded 2 months of the data from Twitter, using the IDs provided in the dataset (see Fig. 2). For this showcase project we narrowed the data down to tweets with exact geo-location information.
The data set contains rich information about how online communication differs across countries and time during the epidemic, for example how different countries deal with the corona epidemic, how the population reacts to measures, how the awareness of the epidemic develops over time, what topics are relevant at each stage of the epidemic or how emotions differ between countries or over time. For this showcase project, we had a look at the emotions.</p>

<div class="figure">
<style scoped="">
    .table {
        max-width: 100%;
        overflow: auto;
    }
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
    .dataframe tbody tr th {
        vertical-align: top;
    }
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="time" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Time</th>
      <th>Number of tweets</th>
      <th>Number of countries</th>
      <th>Number of Languages</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>March 2020</th>
      <td>13942</td>
      <td>152</td>
      <td>41</td>
    </tr>
    <tr>
      <th>April 2020</th>
      <td>45540</td>
      <td>189</td>
      <td>55</td>
    </tr>
  </tbody>
</table>
<p>Fig 2. Subsample of GeoCovid19 data set for March and April 2020, which contains only Tweets with location coordinates.</p>
</div>

<h2 id="training-data">Training data</h2>

<p>In order to create a machine learning model for text classification, we need training data. This is often the most costly step. Luckily, there is a vast amount of training data already created by other research groups.  We found a large training data set with over 20000 tweets in English, Spanish and Arabic classified according to their emotion (2). With the help of this data set we trained state of the art text classification models to classify the tweets of the GeoCovid data according to the emotions Anger, Fear, Sadness and Joy.</p>

<h2 id="modeling">Modeling</h2>

<p>BDSi covers a large base of expertise with its scientists. We can help to find the model that’s best for your particular problem. For text classification we used a model from the family of transformers - deep learning models that can be used to deal with text: for translation, text generation, text identification and text classification among others. These are state-of-the-art models that beat classical approaches for text classification by up to 10% (3).
Transformer models have a good text understanding learned from filling in missing words in sentences (Masked Language Modeling). They learn enough information about text from pretraining on billions of lines of text, so that text preprocessing like stemming or stop word removal is not necessary anymore. For this project, the transformer model we chose is XLMRoberta,  a cross(X)-lingual Language Model that is particularly good at classifying text of multiple languages. In addition, models from the Roberta family (Robustly Optimized Bert pretraining Approach) are better than the Bert models, as they were trained with a more robust algorithm and much more data. XLMRoberta is trained on 2.5Tb of data from the CommonCrawl corpus and Wikipedia in 100 different languages (see Fig. 3). 
This cross-lingual language model significantly outperforms multilingual Bert, and shows better prediction capabilities for tasks in languages other than English compared to using a Roberta model trained on English text only and translating the input (4). Another advantage is that also multilingual training data can be used. Pretrained models are freely available at Huggingface (5) (6).</p>

<figure class="card mb-2 shadow mx-auto" style="width: min(90vw, 800px); max-width: 100%; ">
  
  <img src="/assets/images/blogs/global-emotions-corona/fig3-training-data.png" alt="Training Data for XLM-Roberta encompasses many languages besides English" class="card-img-top" />
  
  <div class="card-body px-2 py-1">
    <div class="card-text">
      <figcaption class="h6 m-0 p0 m0 label-figure">Training Data for XLM-Roberta encompasses many languages besides English</figcaption>
    </div>
  </div>
</figure>

<p>The pretrained model can then be used for finetuning to a specific task, which can be different from the one it was pretrained on (7). 
In our case, we finetuned the model to predict emotions from tweets. For this purpose we could use the training data of the SemEval18 competition (2).
Fine tuning large language models on small data sets can be famously unstable.<br />
It requires a large amount of tricks up your sleeve (8).</p>

<p>We first trained the model on the entire set of tweets in an unsupervised manner for fine tuning. Then we split our training data into 2 parts:
one part for training using cross-validation. We used this data to optimize the hyper parameters and adapt the model weights for the task of emotion prediction. And one part for evaluating the model at the end.</p>

<p>As the model is multilingual, it was sufficient to fine tune it on a training set with only 3 languages (English, Arab and Spanish). As the text is first transformed into a language independent space, the model learns to predict emotions in all the other languages it was built with as well, from Arabic all the way to Vietnamese (4).</p>

<p>Model training is quite intense and needs GPUs with large memory. BDSi now has access to the HPC cluster (9) and does not need to rely on public GPUs. 
Once the model was trained successfully and applied to all the tweets in our dataset, we visualized the result in an interactive fashion.</p>

<h2 id="visualization">Visualization</h2>

<p>At BDSi we are often asked to help with visualizations of the data. Be it for data exploration or to present the final results. Once visualized, it is much easier to discover patterns in the data. Many of the visualizations we do are fully interactive. With the power of Shiny (10) hidden patterns and their connection to parameters can be brought to light. Here’s a link to our shiny apps (11).
We used Plotly (12) for the visualizations related to this project. Plotly is a library that allows for semi-interactive plots that can be easily embedded in web-pages.</p>

<figure class="card mb-2 shadow mx-auto" style="width: min(90vw, 800px); max-width: 100%; ">
  
  <img src="/assets/images/blogs/global-emotions-corona/fig4-relative-distribution.png" alt="Relative Distribution of Emotions in March 2020 for the 15 countries with the most Tweets in our data, ordered alphabetically" class="card-img-top" />
  
  <div class="card-body px-2 py-1">
    <div class="card-text">
      <figcaption class="h6 m-0 p0 m0 label-figure">Relative Distribution of Emotions in March 2020 for the 15 countries with the most Tweets in our data, ordered alphabetically</figcaption>
    </div>
  </div>
</figure>

<figure class="card mb-2 shadow mx-auto" style="width: min(90vw, 800px); max-width: 100%; ">
  
  <img src="/assets/images/blogs/global-emotions-corona/fig5-relative-distribution-of-emotions%20.png" alt="Relative Distribution of Emotions in April 2020 for the 15 countries from Fig. 4" class="card-img-top" />
  
  <div class="card-body px-2 py-1">
    <div class="card-text">
      <figcaption class="h6 m-0 p0 m0 label-figure">Relative Distribution of Emotions in April 2020 for the 15 countries from Fig. 4</figcaption>
    </div>
  </div>
</figure>

<p>While the number of tweets related to Covid19 quadrupled from March to April, the most interesting change was seen in the emotions. In Fig. 4 and 5 we can see how the emotions change from March to April in various countries. While March was somewhat dominated by fear in many countries, tweets in April were mostly joyful. Looking closer at the tweets and their content, we could see, that the increase of tweets about covid was related to that. The hashtag and mention of corona now also appeared in tweets that were only loosely connected to the disease. The epidemic had become part of the life of people in good as much as in bad situations. In order to better understand the change of emotions, it would be necessary for a next step to understand the topics the emotions are related to.
In Fig.1 we show an interactive plot of the sample of tweets from March.</p>

<h2 id="enjoy-exploring-data">Enjoy exploring data</h2>
<p>If you are interested in any part of the process or need further information on data scraping, model training or visualization, please contact us at bdsi@utwente.nl</p>

<p>The project was done for a presentation of BDSi. 
You can find the Prezi-presentation of the project <a href="https://prezi.com/p/o9bpnhhtxkzq/data-science/">here</a></p>

<h2 id="refences">Refences</h2>

<p>(1)	Umair Qazi, Muhammad Imran, Ferda Olfi, “GeoCoV19: A Dataset of Hundreds of Millions of Multilingual COVID-19 Tweets with Location Information”, 2020, arxiv.org/abs/2005.11177</p>

<p>(2)	Saif Mohammad, Felipe Bravo-Marquez, Mohammad Salameh, Svetlana Kiritchenko, “SemEval-2018 Task1: Affect in Tweets”, 2018, https://www.researchgate.net/publication/324834218_SemEval-2018_Task_1_Affect_in_Tweets</p>

<p>(3)	Peter Usherwood, Steven Smit “Low-Shot Classification: A Comparison of Classical and Deep Transfer Machine Learning Approaches”, 2019, arxiv.org/abs/1907.07543</p>

<p>(4)	Conneau et al, “Unsupervised Cross-lingual Representation Learning at Scale”, 2020, arxiv.org/abs/1911.02116</p>

<p>(5)	www.huggingface.com</p>

<p>(6)	Thomas Wolf et al., “HuggingFace’s Transformers: State-of-the-art Natural Language Processing”, 2020,  arxiv.org/abs/1910.03771</p>

<p>(7)	Jeremy Howard, Sebastian Ruder, “Universal Language Model Fine-tuning for Text Classification”, 2018, arxiv.org/abs/1801.06146</p>

<p>(8)	Tianyi Zhang et al, “Revisiting Few-sample BERT Fine-tuning”, 2020, arxiv.org/abs/2006.05987</p>

<p>(9)	hpc.wiki.utwente.nl/eemcs-hpc</p>

<p>(10)	shiny.rstudio.com</p>

<p>(11)	plotly.com/python</p>

        </div>
    </div>
</div>



  </div>
  <footer id="footer">
  <div class="footer-content">
    <div class="footer-block">
      <h2 class="mt-2 h5">
        <span class="iconify-inline" data-icon="ph:users-three"></span>
        Join the community
      </h2>
      <!-- todo: make this an actual form, with backing dbish thing (wait for webhare?) -->
      <a
        class="inset"
        href="https://www.utwente.nl/en/bms/research/bdsi/#subscribe-to-our-newsletter"
      >
        <span
          class="iconify-inline icon"
          data-icon="fluent:news-24-regular"
        ></span>
        subscribe to our newsletter
      </a>
      <a
        class="inset"
        href="https://twitter.com/BdsiUt"
       
      >
        <span class="iconify-inline icon" data-icon="ph:twitter-logo"></span>
        follow us on twitter
      </a>
      <a
        class="inset"
        href="https://www.linkedin.com/company/behavioural-data-science-incubator/about/"
       
      >
        <span class="iconify-inline icon" data-icon="ph:linkedin-logo"></span>
        connect with us on linkedin
      </a>
      <a class="inset" href="/community/#community" 
        ><span
          class="iconify-inline icon"
          data-icon="mdi:microsoft-teams"
        ></span>
        join the team (chat)
      </a>
      <a
        class="inset"
        href="mailto:bdsi@utwente.nl?subject=Dear BDSi&body=Dear BDSi,"
        ><span class="iconify-inline icon" data-icon="ph:envelope"></span>
        write us a letter
      </a>
      <h2 class="mt-2 h5">Proud partners with</h2>
      
      <div class="inset" id="partners-list">
        
        <a href="https://bmslab.utwente.nl/" aria-label="BMS Lab">
          
          <img
            src="/assets/images/content/bmslab/logo-light.svg"
            alt=""
            class="logo"
          />
          
        </a>
        
        <a href="https://www.utwente.nl/en/dcc/" aria-label="Digital Competence Center">
          
          Digital Competence Center
          
        </a>
        
        <a href="https://hpc.wiki.utwente.nl/eemcs-hpc" aria-label="EEMCS High Performance Computing">
          
          EEMCS High Performance Computing
          
        </a>
        
        <a href="https://www.widsworldwide.org/" aria-label="Women in Data Science worldwide">
          
          <img
            src="/assets/images/wids-logo.png"
            alt=""
            class="logo"
          />
          
        </a>
        
      </div>
    </div>
    <div class="footer-block">
      <h2 class="mt-2 h5">
        <div id="team-icon-div"></div>
        Meet the team
      </h2>
      
       
      
      
        
        <div class="tiny-header">Head of BDSi</div>
      
      <a
        href="/team/#stephanie-vandenberg"
        class="inset"
        ><img
          src="/assets/images/team/Stephanie-thumbnail.png"
          alt=""
          class="profile-image"
        />Stéphanie van den Berg</a
      >
      
      
        
        <div class="tiny-header">Data Scientists</div>
      
      <a
        href="/team/#a-k-machens"
        class="inset"
        ><img
          src="/assets/images/team/Anna-thumbnail.png"
          alt=""
          class="profile-image"
        />Anna Machens</a
      >
      
      
      <a
        href="/team/#k-a-kroeze"
        class="inset"
        ><img
          src="/assets/images/team/Karel-thumbnail.png"
          alt=""
          class="profile-image"
        />Karel Kroeze</a
      >
      
      
        
        <div class="tiny-header">Department Liaisons</div>
      
      <a
        href="/team/#s-abhishta"
        class="inset"
        ><img
          src="/assets/images/team/Abhishta-thumbnail.png"
          alt=""
          class="profile-image"
        />Abhishta Abhishta <span class="tiny-header">HBE</span></a
      >
      
      
      <a
        href="/team/#c-g-m-oudshoorn"
        class="inset"
        ><img
          src="/assets/images/team/Karin-thumbnail.png"
          alt=""
          class="profile-image"
        />Karin Groothuis-Oudshoorn <span class="tiny-header">TPS</span></a
      >
      
      
      <a
        href="/team/#martin-schmettow"
        class="inset"
        ><img
          src="/assets/images/team/Martin-thumbnail.png"
          alt=""
          class="profile-image"
        />Martin Schmettow <span class="tiny-header">LDT</span></a
      >
      
      
      <a
        href="/team/#p-m-tenklooster"
        class="inset"
        ><img
          src="/assets/images/team/Peter-thumbnail.png"
          alt=""
          class="profile-image"
        />Peter ten Klooster <span class="tiny-header">HIB</span></a
      >
      
    </div>
    <div class="footer-block sitemap">
      <h2 class="mt-2 h5">
        <span class="iconify-inline" data-icon="ph:git-merge"></span>
        Sitemap
      </h2>
      <ul>
        <li>
          <a href="/about/">About us</a>
          <ul>
              <li><a href="/about/#services">Services</a></li>
              <li><a href="/about/#partners">Partners</a></li>
          </ul>
        </li>
        <li><a href="/news/">News</a></li>
        <li>
          <a href="/research/">Research Support</a>
          <ul>
            <li><a href="/projects/">Projects</a></li>
          </ul>
        </li>
        <li>
          <a href="/expertise/">Expertise Sharing</a>
          <ul>
            <li><a href="/events/">BDSi Events</a></li>
            <li><a href="/community/#topical-communities">Community Events</a></li>
            <li><a href="/blogs/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="/community/">Community Building</a>
          <ul>
            <li><a href="/community/#topical-communities">Data Science communities</a></li>
          </ul>
        </li>
        <li><a href="/team/">Team</a></li>
      </ul>
      
    </div>
    <div class="footer-block">
      <h2 class="mt-2 h5">
        <span class="iconify-inline" data-icon="ph:package"></span>
        Postal address
      </h2>
      <pre class="address-block inset">
        Behavioural Data Science incubator
Faculty of Behavioural and Management Sciences
University of Twente
PO BOX 217
7500 AE Enschede, The Netherlands
      </pre>
      <h2 class="mt-2 h5">
        <span class="iconify-inline" data-icon="ph:hand-waving"></span>
        Visiting address
      </h2>
      <pre class="address-block inset">
          Langezijds 1514
Hallenweg 6
7522 NH Enschede, The Netherlands
      </pre>
    </div>
  </div>
  <div class="sub-footer">
    <div class="title">
      BDSi - Behavioural Data Science incubator, 2021–2025
    </div>
    <a
      class="ml-auto"
     
      href="https://www.utwente.nl/en/about-our-website/"
      >Privacy & Cookies</a
    >
    <a
     
      href="https://www.utwente.nl/en/about-our-website/disclaimer/"
      >Disclaimer & Copyright</a
    >
  </div>
</footer>

<script src="/assets/js/pages/people.js"></script>

    
  <script type="text/javascript" src="/assets/js/scripts.js?v=1760230380"></script>
</body>
</html>
